<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Ben Horvath" />

<meta name="date" content="2018-11-04" />

<title>Data 607 – Project 4</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<style type="text/css">

@font-face {
font-family: 'Open Sans';
font-style: normal;
font-weight: 400;
src: local('Open Sans Regular'), local('OpenSans-Regular'), url(data:font/ttf;base64,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) format('truetype');
}
html {
font-family: sans-serif; 
-webkit-text-size-adjust: 100%; 
-ms-text-size-adjust: 100%; 
}

body {
margin: 0;
}


article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
menu,
nav,
section,
summary {
display: block;
}

audio,
canvas,
progress,
video {
display: inline-block; 
vertical-align: baseline; 
}

audio:not([controls]) {
display: none;
height: 0;
}

[hidden],
template {
display: none;
}


a {
background-color: transparent;
}

a:active,
a:hover {
outline: 0;
}


abbr[title] {
border-bottom: 1px dotted;
}

b,
strong {
font-weight: bold;
}

dfn {
font-style: italic;
}

h1 {
margin: 0.67em 0;
font-size: 2em;
}

mark {
color: #000;
background: #ff0;
}

small {
font-size: 80%;
}

sub,
sup {
position: relative;
font-size: 75%;
line-height: 0;
vertical-align: baseline;
}
sup {
top: -0.5em;
}
sub {
bottom: -0.25em;
}


img {
border: 0;
}

svg:not(:root) {
overflow: hidden;
}


figure {
margin: 1em 40px;
}

hr {
height: 0;
-moz-box-sizing: content-box;
box-sizing: content-box;
}

pre {
overflow: auto;
}

code,
kbd,
pre,
samp {
font-family: monospace, monospace;
font-size: 1em;
}


table {
border-spacing: 0;
border-collapse: collapse;
width: 100%;
margin: 20px auto;
}
th, td {
border-bottom: 1px solid #bbbbbb;
text-align: left;
padding: 10px;
}
th {
background-color: #63a0e1;
color: white;
}
tr:nth-child(odd) {
background-color: #eeeeee;
}
tr:nth-child(even) {
background-color: #ffffff;
}

body {
font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
font-size: 16px;
font-weight: 400;
line-height: 1.5;
color: #666;
background: #ffffff;
}
p {
margin-top: 0;
}
a {
color: #2879d0;
}
a:hover {
color: #2268b2;
}
header {
padding-top: 40px;
padding-bottom: 20px;
background: #2e7bcf;
border-bottom: solid 1px #275da1;
text-align: center;
}
header h1 {
margin-top: 0;
margin-bottom: 0.5em;
font-size: 2em;
font-weight: bold;
line-height: 1;
color: #fff;
letter-spacing: -1px;
}
header h2 {
margin-top: 0;
margin-bottom: 1em;
font-size: 1.5em;
font-weight: normal;
line-height: 1.3;
color: #9ddcff;
letter-spacing: 0;
}
header h3 {
margin-top: 0;
margin-bottom: 1em;
font-size: 1.2em;
font-weight: normal;
line-height: 1.2;
color: #9ddcff;
letter-spacing: 0;
}
.inner, .toc {
position: relative;
width: 840px;
font-size: 1.1em;
margin: 0 auto;
}
.toc {
padding-top: 1em;
padding-bottom: 0;
}
.toc ul {
margin-bottom: 0;
}
#content-wrapper {
padding-top: 30px;
border-top: solid 1px #fff;
}
#main-content img {
max-width: 100%;
}
code, pre {
margin-bottom: 30px;
font-family: Monaco, Consolas, "Bitstream Vera Sans Mono", "Lucida Console", Terminal, monospace;
font-size: 1em;
color: #222;
}
code {
padding: 0 3px;
background-color: #f2f8fc;
border: solid 1px #dbe7f3;
}
pre {
padding: 20px;
overflow: auto;
text-shadow: none;
background: #fafafa;
border: solid 1px #f2f2f2;
font-size: 0.9em;
}
pre code {
padding: 0;
color: #2879d0;
background-color: #fafafa;
border: none;
}
ul, ol, dl {
margin-bottom: 20px;
}

hr {
height: 1px;
margin-top: 1em;
margin-bottom: 1em;
border: 0;
background: #aaa;
background-image: linear-gradient(to right, #eee, #aaa, #eee);
}
form {
padding: 20px;
background: #f2f2f2;
}

#main-content h1 {
margin-top: 0;
margin-bottom: 0;
font-size: 2em;
font-weight: bold;
color: #474747;
letter-spacing: -1px;
}
#main-content h1:before {
padding-right: 0.3em;
margin-left: -0.8em;
color: #9ddcff;
content: "/";
}
#main-content h2 {
margin-bottom: 8px;
font-size: 1.5em;
font-weight: bold;
color: #474747;
}
#main-content h2:before {
padding-right: 0.3em;
margin-left: -1.2em;
content: "//";
color: #9ddcff;
}
#main-content h3 {
margin-top: 24px;
margin-bottom: 8px;
font-size: 1.2em;
font-weight: bold;
color: #474747;
}
#main-content h3:before {
padding-right: 0.3em;
margin-left: -1.7em;
content: "///";
color: #9ddcff;
}
#main-content h4 {
margin-bottom: 8px;
font-size: 1.1em;
font-weight: bold;
color: #474747;
}
h4:before {
padding-right: 0.3em;
margin-left: -2em;
content: "////";
color: #9ddcff;
}
#main-content h5 {
margin-bottom: 8px;
font-size: 1em;
color: #474747;
}
h5:before {
padding-right: 0.3em;
margin-left: -2.4em;
content: "/////";
color: #9ddcff;
}
#main-content h6 {
margin-bottom: 8px;
font-size: 0.9em;
color: #474747;
}
h6:before {
padding-right: 0.3em;
margin-left: -3em;
content: "//////";
color: #9ddcff;
}
p {
margin-bottom: 20px;
}
a {
text-decoration: none;
}
p a {
font-weight: 400;
}
blockquote {
padding: 0 0 0 30px;
margin-bottom: 20px;
font-size: 1em;
border-left: 10px solid #e9e9e9;
}
ul, ol {
padding-left: 30px;
}
dl dd {
font-style: italic;
font-weight: 100;
}

.clearfix:after {
display: block;
height: 0;
clear: both;
visibility: hidden;
content: '.';
}
.clearfix {display: inline-block;}
* html .clearfix {height: 1%;}
.clearfix {display: block;}


@media only screen and (max-width: 850px) {
.toc, .inner {
width: 93%;
font-size: 1em;
}
header {
padding: 10px 0;
}
header h1, header h2 {
width: 100%;
}
header h1 {
font-size: 1.75em;
}
header h2 {
font-size: 1.2em;
}
header h3 {
font-size: 1em;
}
#main-content h1:before,
#main-content h2:before,
#main-content h3:before,
#main-content h4:before,
#main-content h5:before,
#main-content h6:before {
padding-right: 0;
margin-left: 0;
content: none;
}
}
</style>
</head>
<body>
<header>
<div class="inner">
<h1 class="title toc-ignore">Data 607 – Project 4</h1>
<h3 class="author">Ben Horvath</h3>
<h3 class="date">November 4, 2018</h3>
</div>
</header>
<div id="TOC" class="toc">
<ul>
<li><a href="#parsing-raw-e-mails">Parsing Raw E-mails</a></li>
<li><a href="#assemble-the-data">Assemble the Data</a></li>
<li><a href="#feature-engineering">Feature Engineering</a></li>
<li><a href="#modeling">Modeling</a></li>
<li><a href="#evaluation">Evaluation</a></li>
</ul>
</div>
<div id="content-wrapper">
  <div class="inner clearfix">
    <section id="main-content">
<p>Load libraries:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(e1071)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>(stringr)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">library</span>(tm)</a></code></pre></div>
<p>Our purpose is to take two directories of e-mails, one containing spam, the other containing <em>ham</em>, and develop a model to predict whether e-mails are spam or ham.</p>
<p>After attempting to parse the e-mails to get rid of the header data, I will use TF-IDF scores to create a feature set, split the data into train and test sets (75/25), train a Naive Bayes model, and then use accuracy, precision, recall, and F1 score to evaluate the model.</p>
<div id="parsing-raw-e-mails" class="section level1">
<h1>Parsing Raw E-mails</h1>
<p>The goal of this section is to develop a function to parse individual e-mails.</p>
<p>First, let’s get a look at one of them:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">readLines</span>(<span class="st">'./easy_ham/00001.7c53336b37003a9286aba55d2945844c'</span>)</a></code></pre></div>
<pre><code>##   [1] &quot;From exmh-workers-admin@redhat.com  Thu Aug 22 12:36:23 2002&quot;                                                        
##   [2] &quot;Return-Path: &lt;exmh-workers-admin@spamassassin.taint.org&gt;&quot;                                                            
##   [3] &quot;Delivered-To: zzzz@localhost.netnoteinc.com&quot;                                                                         
##   [4] &quot;Received: from localhost (localhost [127.0.0.1])&quot;                                                                    
##   [5] &quot;\tby phobos.labs.netnoteinc.com (Postfix) with ESMTP id D03E543C36&quot;                                                  
##   [6] &quot;\tfor &lt;zzzz@localhost&gt;; Thu, 22 Aug 2002 07:36:16 -0400 (EDT)&quot;                                                       
##   [7] &quot;Received: from phobos [127.0.0.1]&quot;                                                                                   
##   [8] &quot;\tby localhost with IMAP (fetchmail-5.9.0)&quot;                                                                          
##   [9] &quot;\tfor zzzz@localhost (single-drop); Thu, 22 Aug 2002 12:36:16 +0100 (IST)&quot;                                           
##  [10] &quot;Received: from listman.spamassassin.taint.org (listman.spamassassin.taint.org [66.187.233.211]) by&quot;                  
##  [11] &quot;    dogma.slashnull.org (8.11.6/8.11.6) with ESMTP id g7MBYrZ04811 for&quot;                                              
##  [12] &quot;    &lt;zzzz-exmh@spamassassin.taint.org&gt;; Thu, 22 Aug 2002 12:34:53 +0100&quot;                                             
##  [13] &quot;Received: from listman.spamassassin.taint.org (localhost.localdomain [127.0.0.1]) by&quot;                                
##  [14] &quot;    listman.redhat.com (Postfix) with ESMTP id 8386540858; Thu, 22 Aug 2002&quot;                                         
##  [15] &quot;    07:35:02 -0400 (EDT)&quot;                                                                                            
##  [16] &quot;Delivered-To: exmh-workers@listman.spamassassin.taint.org&quot;                                                           
##  [17] &quot;Received: from int-mx1.corp.spamassassin.taint.org (int-mx1.corp.spamassassin.taint.org&quot;                             
##  [18] &quot;    [172.16.52.254]) by listman.redhat.com (Postfix) with ESMTP id 10CF8406D7&quot;                                       
##  [19] &quot;    for &lt;exmh-workers@listman.redhat.com&gt;; Thu, 22 Aug 2002 07:34:10 -0400&quot;                                          
##  [20] &quot;    (EDT)&quot;                                                                                                           
##  [21] &quot;Received: (from mail@localhost) by int-mx1.corp.spamassassin.taint.org (8.11.6/8.11.6)&quot;                              
##  [22] &quot;    id g7MBY7g11259 for exmh-workers@listman.redhat.com; Thu, 22 Aug 2002&quot;                                           
##  [23] &quot;    07:34:07 -0400&quot;                                                                                                  
##  [24] &quot;Received: from mx1.spamassassin.taint.org (mx1.spamassassin.taint.org [172.16.48.31]) by&quot;                            
##  [25] &quot;    int-mx1.corp.redhat.com (8.11.6/8.11.6) with SMTP id g7MBY7Y11255 for&quot;                                           
##  [26] &quot;    &lt;exmh-workers@redhat.com&gt;; Thu, 22 Aug 2002 07:34:07 -0400&quot;                                                      
##  [27] &quot;Received: from ratree.psu.ac.th ([202.28.97.6]) by mx1.spamassassin.taint.org&quot;                                       
##  [28] &quot;    (8.11.6/8.11.6) with SMTP id g7MBIhl25223 for &lt;exmh-workers@redhat.com&gt;;&quot;                                        
##  [29] &quot;    Thu, 22 Aug 2002 07:18:55 -0400&quot;                                                                                 
##  [30] &quot;Received: from delta.cs.mu.OZ.AU (delta.coe.psu.ac.th [172.30.0.98]) by&quot;                                             
##  [31] &quot;    ratree.psu.ac.th (8.11.6/8.11.6) with ESMTP id g7MBWel29762;&quot;                                                    
##  [32] &quot;    Thu, 22 Aug 2002 18:32:40 +0700 (ICT)&quot;                                                                           
##  [33] &quot;Received: from munnari.OZ.AU (localhost [127.0.0.1]) by delta.cs.mu.OZ.AU&quot;                                           
##  [34] &quot;    (8.11.6/8.11.6) with ESMTP id g7MBQPW13260; Thu, 22 Aug 2002 18:26:25&quot;                                           
##  [35] &quot;    +0700 (ICT)&quot;                                                                                                     
##  [36] &quot;From: Robert Elz &lt;kre@munnari.OZ.AU&gt;&quot;                                                                                
##  [37] &quot;To: Chris Garrigues &lt;cwg-dated-1030377287.06fa6d@DeepEddy.Com&gt;&quot;                                                      
##  [38] &quot;Cc: exmh-workers@spamassassin.taint.org&quot;                                                                             
##  [39] &quot;Subject: Re: New Sequences Window&quot;                                                                                   
##  [40] &quot;In-Reply-To: &lt;1029945287.4797.TMDA@deepeddy.vircio.com&gt;&quot;                                                             
##  [41] &quot;References: &lt;1029945287.4797.TMDA@deepeddy.vircio.com&gt;&quot;                                                              
##  [42] &quot;    &lt;1029882468.3116.TMDA@deepeddy.vircio.com&gt; &lt;9627.1029933001@munnari.OZ.AU&gt;&quot;                                      
##  [43] &quot;    &lt;1029943066.26919.TMDA@deepeddy.vircio.com&gt;&quot;                                                                     
##  [44] &quot;    &lt;1029944441.398.TMDA@deepeddy.vircio.com&gt;&quot;                                                                       
##  [45] &quot;MIME-Version: 1.0&quot;                                                                                                   
##  [46] &quot;Content-Type: text/plain; charset=us-ascii&quot;                                                                          
##  [47] &quot;Message-Id: &lt;13258.1030015585@munnari.OZ.AU&gt;&quot;                                                                        
##  [48] &quot;X-Loop: exmh-workers@spamassassin.taint.org&quot;                                                                         
##  [49] &quot;Sender: exmh-workers-admin@spamassassin.taint.org&quot;                                                                   
##  [50] &quot;Errors-To: exmh-workers-admin@spamassassin.taint.org&quot;                                                                
##  [51] &quot;X-Beenthere: exmh-workers@spamassassin.taint.org&quot;                                                                    
##  [52] &quot;X-Mailman-Version: 2.0.1&quot;                                                                                            
##  [53] &quot;Precedence: bulk&quot;                                                                                                    
##  [54] &quot;List-Help: &lt;mailto:exmh-workers-request@spamassassin.taint.org?subject=help&gt;&quot;                                        
##  [55] &quot;List-Post: &lt;mailto:exmh-workers@spamassassin.taint.org&gt;&quot;                                                             
##  [56] &quot;List-Subscribe: &lt;https://listman.spamassassin.taint.org/mailman/listinfo/exmh-workers&gt;,&quot;                             
##  [57] &quot;    &lt;mailto:exmh-workers-request@redhat.com?subject=subscribe&gt;&quot;                                                      
##  [58] &quot;List-Id: Discussion list for EXMH developers &lt;exmh-workers.spamassassin.taint.org&gt;&quot;                                  
##  [59] &quot;List-Unsubscribe: &lt;https://listman.spamassassin.taint.org/mailman/listinfo/exmh-workers&gt;,&quot;                           
##  [60] &quot;    &lt;mailto:exmh-workers-request@redhat.com?subject=unsubscribe&gt;&quot;                                                    
##  [61] &quot;List-Archive: &lt;https://listman.spamassassin.taint.org/mailman/private/exmh-workers/&gt;&quot;                                
##  [62] &quot;Date: Thu, 22 Aug 2002 18:26:25 +0700&quot;                                                                               
##  [63] &quot;&quot;                                                                                                                    
##  [64] &quot;    Date:        Wed, 21 Aug 2002 10:54:46 -0500&quot;                                                                    
##  [65] &quot;    From:        Chris Garrigues &lt;cwg-dated-1030377287.06fa6d@DeepEddy.Com&gt;&quot;                                         
##  [66] &quot;    Message-ID:  &lt;1029945287.4797.TMDA@deepeddy.vircio.com&gt;&quot;                                                         
##  [67] &quot;&quot;                                                                                                                    
##  [68] &quot;&quot;                                                                                                                    
##  [69] &quot;  | I can't reproduce this error.&quot;                                                                                   
##  [70] &quot;&quot;                                                                                                                    
##  [71] &quot;For me it is very repeatable... (like every time, without fail).&quot;                                                    
##  [72] &quot;&quot;                                                                                                                    
##  [73] &quot;This is the debug log of the pick happening ...&quot;                                                                     
##  [74] &quot;&quot;                                                                                                                    
##  [75] &quot;18:19:03 Pick_It {exec pick +inbox -list -lbrace -lbrace -subject ftp -rbrace -rbrace} {4852-4852 -sequence mercury}&quot;
##  [76] &quot;18:19:03 exec pick +inbox -list -lbrace -lbrace -subject ftp -rbrace -rbrace 4852-4852 -sequence mercury&quot;            
##  [77] &quot;18:19:04 Ftoc_PickMsgs {{1 hit}}&quot;                                                                                    
##  [78] &quot;18:19:04 Marking 1 hits&quot;                                                                                             
##  [79] &quot;18:19:04 tkerror: syntax error in expression \&quot;int ...&quot;                                                              
##  [80] &quot;&quot;                                                                                                                    
##  [81] &quot;Note, if I run the pick command by hand ...&quot;                                                                         
##  [82] &quot;&quot;                                                                                                                    
##  [83] &quot;delta$ pick +inbox -list -lbrace -lbrace -subject ftp -rbrace -rbrace  4852-4852 -sequence mercury&quot;                  
##  [84] &quot;1 hit&quot;                                                                                                               
##  [85] &quot;&quot;                                                                                                                    
##  [86] &quot;That's where the \&quot;1 hit\&quot; comes from (obviously).  The version of nmh I'm&quot;                                          
##  [87] &quot;using is ...&quot;                                                                                                        
##  [88] &quot;&quot;                                                                                                                    
##  [89] &quot;delta$ pick -version&quot;                                                                                                
##  [90] &quot;pick -- nmh-1.0.4 [compiled on fuchsia.cs.mu.OZ.AU at Sun Mar 17 14:55:56 ICT 2002]&quot;                                 
##  [91] &quot;&quot;                                                                                                                    
##  [92] &quot;And the relevant part of my .mh_profile ...&quot;                                                                         
##  [93] &quot;&quot;                                                                                                                    
##  [94] &quot;delta$ mhparam pick&quot;                                                                                                 
##  [95] &quot;-seq sel -list&quot;                                                                                                      
##  [96] &quot;&quot;                                                                                                                    
##  [97] &quot;&quot;                                                                                                                    
##  [98] &quot;Since the pick command works, the sequence (actually, both of them, the&quot;                                             
##  [99] &quot;one that's explicit on the command line, from the search popup, and the&quot;                                             
## [100] &quot;one that comes from .mh_profile) do get created.&quot;                                                                    
## [101] &quot;&quot;                                                                                                                    
## [102] &quot;kre&quot;                                                                                                                 
## [103] &quot;&quot;                                                                                                                    
## [104] &quot;ps: this is still using the version of the code form a day ago, I haven't&quot;                                           
## [105] &quot;been able to reach the cvs repository today (local routing issue I think).&quot;                                          
## [106] &quot;&quot;                                                                                                                    
## [107] &quot;&quot;                                                                                                                    
## [108] &quot;&quot;                                                                                                                    
## [109] &quot;_______________________________________________&quot;                                                                     
## [110] &quot;Exmh-workers mailing list&quot;                                                                                           
## [111] &quot;Exmh-workers@redhat.com&quot;                                                                                             
## [112] &quot;https://listman.redhat.com/mailman/listinfo/exmh-workers&quot;                                                            
## [113] &quot;&quot;</code></pre>
<p>There are many fields containing metadata about the e-mail, or header data. Some of these fields might be useful for a classifier, but I will not explore them here. Rather, I will try to eliminate them all so they don’t confuse the classifier. We can use regular expressions and the <code>stringr</code> pacakge to try to filter most of them out.</p>
<p>Ideally, each header field would correspond to a single line. However, some of these lines are broken by ‘\n\t’ as well as ‘\n +’ sequences. Convert those into single spaces so that each header field sits entirely on its own single line:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">raw_msg &lt;-<span class="st"> </span><span class="kw">readLines</span>(<span class="st">'./easy_ham/00001.7c53336b37003a9286aba55d2945844c'</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">    </span><span class="kw">paste</span>(<span class="dt">collapse=</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">    </span><span class="kw">str_replace_all</span>(<span class="st">'</span><span class="ch">\n\t</span><span class="st">'</span>, <span class="st">' '</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">    </span><span class="kw">str_replace_all</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">  +'</span>, <span class="st">' '</span>)</a></code></pre></div>
<p>Next, enumerate the group of header fields to remove:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Delete these lines</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">data_fields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'Return-Path:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Delivered-To:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Received:.*</span><span class="ch">\\</span><span class="st">n'</span>, </a>
<a class="sourceLine" id="cb5-3" data-line-number="3">                 <span class="st">'References:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'MIME-Version:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Content-Type:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">                 <span class="st">'Message-Id:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'X-Loop.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Sender:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Errors-To:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">                 <span class="st">'X-Beenthere:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'X-Mailman-Version:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'In-Reply-To:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">                 <span class="st">'List-Help:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'List-Post:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'List-Subscribe:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">                 <span class="st">'List-Id:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'List-Unsubscribe:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'List-Archive:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">                 <span class="st">'Precedence:.*</span><span class="ch">\\</span><span class="st">n'</span>)</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"></a>
<a class="sourceLine" id="cb5-10" data-line-number="10">msg &lt;-<span class="st"> </span><span class="kw">str_remove_all</span>(raw_msg, <span class="kw">paste</span>(data_fields, <span class="dt">collapse=</span><span class="st">'|'</span>))</a></code></pre></div>
<p>We might want to use some of the more familiar header data, so let’s extract them and then remove them from the message text:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">message_id &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(Message-ID::)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">from &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(From:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">to &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(To:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">cc &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(CC:|Cc:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">subj &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(Subject:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">date &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(Date:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">extracted_fields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'From:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'To:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Cc:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Subject:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">                      <span class="st">'Date:.*</span><span class="ch">\\</span><span class="st">n'</span>)</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">msg &lt;-<span class="st"> </span><span class="kw">str_remove_all</span>(msg, <span class="kw">paste</span>(extracted_fields, <span class="dt">collapse=</span><span class="st">'|'</span>))</a></code></pre></div>
<p>Here is the final product, the <code>parse_email()</code> function:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">parse_email &lt;-<span class="st"> </span><span class="cf">function</span>(file_path){</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">    </a>
<a class="sourceLine" id="cb7-3" data-line-number="3">    raw_msg &lt;-<span class="st"> </span><span class="kw">readLines</span>(file_path) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">        </span><span class="kw">paste</span>(<span class="dt">collapse=</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="st">        </span><span class="kw">str_replace_all</span>(<span class="st">'</span><span class="ch">\n\t</span><span class="st">'</span>, <span class="st">' '</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="st">        </span><span class="kw">str_replace_all</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">  +'</span>, <span class="st">' '</span>)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">    </a>
<a class="sourceLine" id="cb7-8" data-line-number="8">    data_fields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'Return-Path:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Delivered-To:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Received:.*</span><span class="ch">\\</span><span class="st">n'</span>, </a>
<a class="sourceLine" id="cb7-9" data-line-number="9">                 <span class="st">'References:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'MIME-Version:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Content-Type:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">                 <span class="st">'Message-Id:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'X-Loop.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Sender:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Errors-To:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb7-11" data-line-number="11">                 <span class="st">'X-Beenthere:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'X-Mailman-Version:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'In-Reply-To:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb7-12" data-line-number="12">                 <span class="st">'List-Help:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'List-Post:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'List-Subscribe:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">                 <span class="st">'List-Id:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'List-Unsubscribe:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'List-Archive:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb7-14" data-line-number="14">                 <span class="st">'Precedence:.*</span><span class="ch">\\</span><span class="st">n'</span>)</a>
<a class="sourceLine" id="cb7-15" data-line-number="15"></a>
<a class="sourceLine" id="cb7-16" data-line-number="16">    msg &lt;-<span class="st"> </span><span class="kw">str_remove_all</span>(raw_msg, <span class="kw">paste</span>(data_fields, <span class="dt">collapse=</span><span class="st">'|'</span>))</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">    </a>
<a class="sourceLine" id="cb7-18" data-line-number="18">    message_id &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(Message-ID:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb7-19" data-line-number="19">    from &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(From:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb7-20" data-line-number="20">    to &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(To:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb7-21" data-line-number="21">    cc &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(CC:|Cc:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb7-22" data-line-number="22">    subj &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(Subject:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb7-23" data-line-number="23">    date &lt;-<span class="st"> </span><span class="kw">str_trim</span>(<span class="kw">str_match</span>(msg, <span class="st">'(Date:)(.*)'</span>)[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb7-24" data-line-number="24">    </a>
<a class="sourceLine" id="cb7-25" data-line-number="25">    extracted_fields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'From:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'To:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Cc:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Subject:.*</span><span class="ch">\\</span><span class="st">n'</span>,</a>
<a class="sourceLine" id="cb7-26" data-line-number="26">                          <span class="st">'Date:.*</span><span class="ch">\\</span><span class="st">n'</span>, <span class="st">'Message-ID:.*</span><span class="ch">\\</span><span class="st">n'</span>)</a>
<a class="sourceLine" id="cb7-27" data-line-number="27">    body &lt;-<span class="st"> </span><span class="kw">str_remove_all</span>(msg, <span class="kw">paste</span>(extracted_fields, <span class="dt">collapse=</span><span class="st">'|'</span>))</a>
<a class="sourceLine" id="cb7-28" data-line-number="28">    </a>
<a class="sourceLine" id="cb7-29" data-line-number="29">    <span class="kw">return</span>(<span class="kw">list</span>(<span class="st">'id'</span>=message_id,</a>
<a class="sourceLine" id="cb7-30" data-line-number="30">                <span class="st">'from'</span>=from,</a>
<a class="sourceLine" id="cb7-31" data-line-number="31">                <span class="st">'to'</span>=to,</a>
<a class="sourceLine" id="cb7-32" data-line-number="32">                <span class="st">'cc'</span>=cc,</a>
<a class="sourceLine" id="cb7-33" data-line-number="33">                <span class="st">'subj'</span>=subj,</a>
<a class="sourceLine" id="cb7-34" data-line-number="34">                <span class="st">'date'</span>=date,</a>
<a class="sourceLine" id="cb7-35" data-line-number="35">                <span class="st">'body'</span>=msg))</a>
<a class="sourceLine" id="cb7-36" data-line-number="36">} </a>
<a class="sourceLine" id="cb7-37" data-line-number="37"></a>
<a class="sourceLine" id="cb7-38" data-line-number="38"><span class="kw">parse_email</span>(<span class="st">'./easy_ham/00001.7c53336b37003a9286aba55d2945844c'</span>)</a></code></pre></div>
<pre><code>## $id
## [1] &quot;&lt;1029945287.4797.TMDA@deepeddy.vircio.com&gt;&quot;
## 
## $from
## [1] &quot;Robert Elz &lt;kre@munnari.OZ.AU&gt;&quot;
## 
## $to
## [1] &quot;Chris Garrigues &lt;cwg-dated-1030377287.06fa6d@DeepEddy.Com&gt;&quot;
## 
## $cc
## [1] &quot;exmh-workers@spamassassin.taint.org&quot;
## 
## $subj
## [1] &quot;Re: New Sequences Window&quot;
## 
## $date
## [1] &quot;Thu, 22 Aug 2002 18:26:25 +0700&quot;
## 
## $body
## [1] &quot;From exmh-workers-admin@redhat.com  Thu Aug 22 12:36:23 2002\nFrom: Robert Elz &lt;kre@munnari.OZ.AU&gt;\nTo: Chris Garrigues &lt;cwg-dated-1030377287.06fa6d@DeepEddy.Com&gt;\nCc: exmh-workers@spamassassin.taint.org\nSubject: Re: New Sequences Window\nDate: Thu, 22 Aug 2002 18:26:25 +0700\n Date:        Wed, 21 Aug 2002 10:54:46 -0500 From:        Chris Garrigues &lt;cwg-dated-1030377287.06fa6d@DeepEddy.Com&gt; Message-ID:  &lt;1029945287.4797.TMDA@deepeddy.vircio.com&gt;\n\n | I can't reproduce this error.\n\nFor me it is very repeatable... (like every time, without fail).\n\nThis is the debug log of the pick happening ...\n\n18:19:03 Pick_It {exec pick +inbox -list -lbrace -lbrace -subject ftp -rbrace -rbrace} {4852-4852 -sequence mercury}\n18:19:03 exec pick +inbox -list -lbrace -lbrace -subject ftp -rbrace -rbrace 4852-4852 -sequence mercury\n18:19:04 Ftoc_PickMsgs {{1 hit}}\n18:19:04 Marking 1 hits\n18:19:04 tkerror: syntax error in expression \&quot;int ...\n\nNote, if I run the pick command by hand ...\n\ndelta$ pick +inbox -list -lbrace -lbrace -subject ftp -rbrace -rbrace  4852-4852 -sequence mercury\n1 hit\n\nThat's where the \&quot;1 hit\&quot; comes from (obviously).  The version of nmh I'm\nusing is ...\n\ndelta$ pick -version\npick -- nmh-1.0.4 [compiled on fuchsia.cs.mu.OZ.AU at Sun Mar 17 14:55:56 ICT 2002]\n\nAnd the relevant part of my .mh_profile ...\n\ndelta$ mhparam pick\n-seq sel -list\n\n\nSince the pick command works, the sequence (actually, both of them, the\none that's explicit on the command line, from the search popup, and the\none that comes from .mh_profile) do get created.\n\nkre\n\nps: this is still using the version of the code form a day ago, I haven't\nbeen able to reach the cvs repository today (local routing issue I think).\n\n\n\n_______________________________________________\nExmh-workers mailing list\nExmh-workers@redhat.com\nhttps://listman.redhat.com/mailman/listinfo/exmh-workers\n&quot;</code></pre>
<p>The function isn’t perfect, but it will do for our purposes.</p>
</div>
<div id="assemble-the-data" class="section level1">
<h1>Assemble the Data</h1>
<p>Read in the spam dataset:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">spam_files &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="kw">list.files</span>(<span class="st">'./spam'</span>), </a>
<a class="sourceLine" id="cb9-2" data-line-number="2">                     <span class="cf">function</span>(x) <span class="kw">paste</span>(<span class="st">'./spam'</span>, x, <span class="dt">sep=</span><span class="st">'/'</span>))</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">spam_list &lt;-<span class="st"> </span><span class="kw">lapply</span>(spam_files, parse_email)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">spam_list_dfs &lt;-<span class="st"> </span><span class="kw">lapply</span>(spam_list, data.frame, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">spam &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(spam_list_dfs) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="st">    </span><span class="kw">mutate</span>(<span class="st">'y'</span>=<span class="st">'spam'</span>)</a>
<a class="sourceLine" id="cb9-8" data-line-number="8"></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="kw">head</span>(spam)</a></code></pre></div>
<pre><code>##                                                    id
## 1                      &lt;0103c1042001882DD_IT7@dd_it7&gt;
## 2                                                &lt;NA&gt;
## 3 &lt;9a63c01c249e0$e5a9d610$1106fea9@freeyankeedom.com&gt;
## 4                                                &lt;NA&gt;
## 5                                                &lt;NA&gt;
## 6                 &lt;413-220028422154219900@freesource&gt;
##                                          from
## 1                         12a1mailbot1@web.de
## 2      &quot;Slim Down&quot; &lt;taylor@s3.serveimage.com&gt;
## 3       &quot;Slim Down&quot; &lt;sabrina@mx3.1premio.com&gt;
## 4         Account Services &lt;wsup@playful.com&gt;
## 5      &quot;Slim n Trim&quot; &lt;yenene@mx2.1premio.com&gt;
## 6 &quot;TheCashSystem&quot; &lt;Thecashsystem@firemail.de&gt;
##                                to   cc
## 1            &lt;dcek1a1@netsgo.com&gt; &lt;NA&gt;
## 2                 &lt;ilug@linux.ie&gt; &lt;NA&gt;
## 3   &lt;zzzz@spamassassin.taint.org&gt; &lt;NA&gt;
## 4     zzzz@spamassassin.taint.org     
## 5               &lt;social@linux.ie&gt; &lt;NA&gt;
## 6 &quot;1&quot; &lt;thecashsystem@firemail.de&gt; &lt;NA&gt;
##                                                                                      subj
## 1                                                          Life Insurance - Why Pay More?
## 2                                   [ILUG] Guaranteed to lose 10-12 lbs in 30 days 10.206
## 3                 Guaranteed to lose 10-12 lbs in 30 days                          11.150
## 4 Re: Fw: User Name &amp; Password to Membership To 5 Sites zzzz@spamassassin.taint.org pviqg
## 5                        [ILUG-Social] re: Guaranteed to lose 10-12 lbs in 30 days 10.148
## 6                                                       RE: Your Bank Account Information
##                              date
## 1 Wed, 21 Aug 2002 20:31:57 -1600
## 2 Thu, 22 Aug 2002 06:18:18 -0600
## 3 Thu, 22 Aug 2002 07:36:19 -0600
## 4 Thu, 22 Aug 2002 08:13:35 -0700
## 5 Thu, 22 Aug 2002 09:33:07 -0600
## 6 Thu, 22 Aug 2002 10:42:19 -0500
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           body
## 1 From 12a1mailbot1@web.de  Thu Aug 22 13:17:22 2002\nFrom: 12a1mailbot1@web.de\nTo: &lt;dcek1a1@netsgo.com&gt;\nSubject: Life Insurance - Why Pay More?\nDate: Wed, 21 Aug 2002 20:31:57 -1600\nMessage-ID: &lt;0103c1042001882DD_IT7@dd_it7&gt;\nContent-Transfer-Encoding: quoted-printable\n\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;\n&lt;META content=3D&quot;text/html; charset=3Dwindows-1252&quot; http-equiv=3DContent-T=\nype&gt;\n&lt;META content=3D&quot;MSHTML 5.00.2314.1000&quot; name=3DGENERATOR&gt;&lt;/HEAD&gt;\n&lt;BODY&gt;&lt;!-- Inserted by Calypso --&gt;\n&lt;TABLE border=3D0 cellPadding=3D0 cellSpacing=3D2 id=3D_CalyPrintHeader_ r=\nules=3Dnone \nstyle=3D&quot;COLOR: black; DISPLAY: none&quot; width=3D&quot;100%&quot;&gt; &lt;TBODY&gt; &lt;TR&gt; &lt;TD colSpan=3D3&gt; &lt;HR color=3Dblack noShade SIZE=3D1&gt; &lt;/TD&gt;&lt;/TR&gt;&lt;/TD&gt;&lt;/TR&gt; &lt;TR&gt; &lt;TD colSpan=3D3&gt; &lt;HR color=3Dblack noShade SIZE=3D1&gt; &lt;/TD&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;!-- End Calypso --&gt;&lt;!-- Inserted by Calypso=\n --&gt;&lt;FONT \ncolor=3D#000000 face=3DVERDANA,ARIAL,HELVETICA size=3D-2&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/TD&gt;&lt;=\n/TR&gt;&lt;/TABLE&gt;&lt;!-- End Calypso --&gt;&lt;FONT color=3D#ff0000 \nface=3D&quot;Copperplate Gothic Bold&quot; size=3D5 PTSIZE=3D&quot;10&quot;&gt;\n&lt;CENTER&gt;Save up to 70% on Life Insurance.&lt;/CENTER&gt;&lt;/FONT&gt;&lt;FONT color=3D#ff=\n0000 \nface=3D&quot;Copperplate Gothic Bold&quot; size=3D5 PTSIZE=3D&quot;10&quot;&gt;\n&lt;CENTER&gt;Why Spend More Than You Have To?\n&lt;CENTER&gt;&lt;FONT color=3D#ff0000 face=3D&quot;Copperplate Gothic Bold&quot; size=3D5 PT=\nSIZE=3D&quot;10&quot;&gt;\n&lt;CENTER&gt;Life Quote Savings\n&lt;CENTER&gt;\n&lt;P align=3Dleft&gt;&lt;/P&gt;\n&lt;P align=3Dleft&gt;&lt;/P&gt;&lt;/FONT&gt;&lt;/U&gt;&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/U&gt;&lt;/B&gt;&lt;/U&gt;&lt;/I&gt;\n&lt;P&gt;&lt;/P&gt;\n&lt;CENTER&gt;\n&lt;TABLE border=3D0 borderColor=3D#111111 cellPadding=3D0 cellSpacing=3D0 wi=\ndth=3D650&gt; &lt;TBODY&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;\n&lt;TABLE border=3D0 borderColor=3D#111111 cellPadding=3D5 cellSpacing=3D0 wi=\ndth=3D650&gt; &lt;TBODY&gt; &lt;TR&gt; &lt;TD colSpan=3D2 width=3D&quot;35%&quot;&gt;&lt;B&gt;&lt;FONT face=3DVerdana size=3D4&gt;Ensurin=\ng your  family's financial security is very important. Life Quote Savings ma=\nkes  buying life insurance simple and affordable. We Provide FREE Access =\nto The  Very Best Companies and The Lowest Rates.&lt;/FONT&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt; &lt;TR&gt; &lt;TD align=3Dmiddle vAlign=3Dtop width=3D&quot;18%&quot;&gt; &lt;TABLE borderColor=3D#111111 width=3D&quot;100%&quot;&gt; &lt;TBODY&gt; &lt;TR&gt; &lt;TD style=3D&quot;PADDING-LEFT: 5px; PADDING-RIGHT: 5px&quot; width=3D&quot;100=\n%&quot;&gt;&lt;FONT  face=3DVerdana size=3D4&gt;&lt;B&gt;Life Quote Savings&lt;/B&gt; is FAST, EAS=\nY and  SAVES you money! Let us help you get started with the best val=\nues in  the country on new coverage. You can SAVE hundreds or even tho=\nusands  of dollars by requesting a FREE quote from Lifequote Savings. =\nOur  service will take you less than 5 minutes to complete. Shop an=\nd  compare. SAVE up to 70% on all types of Life insurance! \n&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt; &lt;TR&gt;&lt;BR&gt;&lt;BR&gt; &lt;TD height=3D50 style=3D&quot;PADDING-LEFT: 5px; PADDING-RIGHT: 5px&quot;  width=3D&quot;100%&quot;&gt; &lt;P align=3Dcenter&gt;&lt;B&gt;&lt;FONT face=3DVerdana size=3D5&gt;&lt;A  href=3D&quot;http://website.e365.cc/savequote/&quot;&gt;Click Here For Your=\n  Free Quote!&lt;/A&gt;&lt;/FONT&gt;&lt;/B&gt;&lt;/P&gt;&lt;/TD&gt; &lt;P&gt;&lt;FONT face=3DVerdana size=3D4&gt;&lt;STRONG&gt; &lt;CENTER&gt;Protecting your family is the best investment you'll eve=\nr  make!&lt;BR&gt;&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt; &lt;TR&gt;&lt;BR&gt;&lt;BR&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TD&gt;&lt;/TR&gt; &lt;TR&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt; &lt;P align=3Dleft&gt;&lt;FONT face=3D&quot;Arial, Helvetica, sans-serif&quot; size=3D2=\n&gt;&lt;/FONT&gt;&lt;/P&gt; &lt;P&gt;&lt;/P&gt; &lt;CENTER&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt; &lt;P&gt;&lt;/P&gt; &lt;P align=3Dleft&gt;&lt;BR&gt;&lt;/B&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;/P&gt; &lt;P align=3Dcenter&gt;&lt;BR&gt;&lt;/P&gt; &lt;P align=3Dleft&gt;&lt;BR&gt;&lt;/B&gt;&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;If you are in receipt of this=\n email  in error and/or wish to be removed from our list, &lt;A  href=3D&quot;mailto:coins@btamail.net.cn&quot;&gt;PLEASE CLICK HERE&lt;/A&gt; AND TYPE =\nREMOVE. If you  reside in any state which prohibits e-mail solicitations for insuran=\nce,  please disregard this  email.&lt;BR&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR=\n&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;/CENTER&gt;&lt;/CENTER&gt;&lt;/TR&gt;&lt;/TBODY&gt;&lt;/TABLE&gt;&lt;/CENTER&gt;&lt;/=\nCENTER&gt;&lt;/CENTER&gt;&lt;/CENTER&gt;&lt;/CENTER&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\n\n
## 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      From ilug-admin@linux.ie  Thu Aug 22 13:27:39 2002\nX-Authentication-Warning: lugh.tuatha.org: Host [67.104.83.251] claimed to be email.qves.com\nFrom: &quot;Slim Down&quot; &lt;taylor@s3.serveimage.com&gt;\nTo: &lt;ilug@linux.ie&gt;\nDate: Thu, 22 Aug 2002 06:18:18 -0600\nContent-Transfer-Encoding: 7bit\nX-Mailer: Microsoft CDO for Windows 2000\nThread-Index: AcJJ1f+3FWdz11AmR6uWbmQN5gGxxw==\nContent-Class: urn:content-classes:message\nX-Mimeole: Produced By Microsoft MimeOLE V6.00.2462.0000\nX-Originalarrivaltime: 22 Aug 2002 12:18:18.0699 (UTC) FILETIME=[FFB949B0:01C249D5]\nSubject: [ILUG] Guaranteed to lose 10-12 lbs in 30 days 10.206\n\n1) Fight The Risk of Cancer!\nhttp://www.adclick.ws/p.cfm?o=315&amp;s=pk007\n\n2) Slim Down - Guaranteed to lose 10-12 lbs in 30 days\nhttp://www.adclick.ws/p.cfm?o=249&amp;s=pk007\n\n3) Get the Child Support You Deserve - Free Legal Advice\nhttp://www.adclick.ws/p.cfm?o=245&amp;s=pk002\n\n4) Join the Web's Fastest Growing Singles Community\nhttp://www.adclick.ws/p.cfm?o=259&amp;s=pk007\n\n5) Start Your Private Photo Album Online!\nhttp://www.adclick.ws/p.cfm?o=283&amp;s=pk007\n\nHave a Wonderful Day,\nOffer Manager\nPrizeMama\n\n\n\n\n\n\n\n\n\n\n\n\n\nIf you wish to leave this list please use the link below.\nhttp://www.qves.com/trim/?ilug@linux.ie%7C17%7C114258\n\n\n-- \nIrish Linux Users' Group: ilug@linux.ie\nhttp://www.linux.ie/mailman/listinfo/ilug for (un)subscription information.\nList maintainer: listmaster@linux.ie\n
## 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       From sabrina@mx3.1premio.com  Thu Aug 22 14:44:07 2002\nFrom: &quot;Slim Down&quot; &lt;sabrina@mx3.1premio.com&gt;\nTo: &lt;zzzz@spamassassin.taint.org&gt;\nSubject: Guaranteed to lose 10-12 lbs in 30 days                          11.150\nDate: Thu, 22 Aug 2002 07:36:19 -0600\nMessage-ID: &lt;9a63c01c249e0$e5a9d610$1106fea9@freeyankeedom.com&gt;\nContent-Transfer-Encoding: 7bit\nX-Mailer: Microsoft CDO for Windows 2000\nThread-Index: AcJJ4OWpowGq7rdNSwCz5HE3x9ZZDQ==\nContent-Class: urn:content-classes:message\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2462.0000\nX-OriginalArrivalTime: 22 Aug 2002 13:36:20.0969 (UTC) FILETIME=[E692FD90:01C249E0]\n\n1) Fight The Risk of Cancer!\nhttp://www.adclick.ws/p.cfm?o=315&amp;s=pk007\n\n2) Slim Down - Guaranteed to lose 10-12 lbs in 30 days\nhttp://www.adclick.ws/p.cfm?o=249&amp;s=pk007\n\n3) Get the Child Support You Deserve - Free Legal Advice\nhttp://www.adclick.ws/p.cfm?o=245&amp;s=pk002\n\n4) Join the Web's Fastest Growing Singles Community\nhttp://www.adclick.ws/p.cfm?o=259&amp;s=pk007\n\n5) Start Your Private Photo Album Online!\nhttp://www.adclick.ws/p.cfm?o=283&amp;s=pk007\n\nHave a Wonderful Day,\nOffer Manager\nPrizeMama\n\n\n\n\n\n\n\n\n\n\n\n\n\nIf you wish to leave this list please use the link below.\nhttp://www.qves.com/trim/?zzzz@spamassassin.taint.org%7C17%7C308417\n
## 4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               From wsup@playful.com  Thu Aug 22 16:17:00 2002\nFrom: Account Services &lt;wsup@playful.com&gt;\nTo: zzzz@spamassassin.taint.org\nCc: \nSubject: Re: Fw: User Name &amp; Password to Membership To 5 Sites zzzz@spamassassin.taint.org pviqg\nMime-Version: 1.0\nDate: Thu, 22 Aug 2002 08:13:35 -0700\nX-Mailer: Microsoft Outlook Express 5.00.2615.200\nX-Priority: 1\n\n##################################################\n#                                                #\n#                 Adult Club                     #\n#           Offers FREE Membership               #\n#                                                #\n##################################################\n\n&gt;&gt;&gt;&gt;&gt;  INSTANT ACCESS TO ALL SITES NOW\n&gt;&gt;&gt;&gt;&gt;  Your User Name And Password is.\n&gt;&gt;&gt;&gt;&gt;  User Name: zzzz@spamassassin.taint.org\n&gt;&gt;&gt;&gt;&gt;  Password: 760382\n\n5 of the Best Adult Sites on the Internet for FREE!\n---------------------------------------\nNEWS 08/18/02\nWith just over 2.9 Million Members that signed up for FREE, Last month there were 721,184 New\nMembers. Are you one of them yet???\n---------------------------------------\nOur Membership FAQ\n\nQ. Why are you offering free access to 5 adult membership sites for free?\nA. I have advertisers that pay me for ad space so you don't have to pay for membership.\n\nQ. Is it true my membership is for life?\nA. Absolutely you'll never have to pay a cent the advertisers do.\n\nQ. Can I give my account to my friends and family?\nA. Yes, as long they are over the age of 18.\n\nQ. Do I have to sign up for all 5 membership sites?\nA. No just one to get access to all of them.\n\nQ. How do I get started?\nA. Click on one of the following links below to become a member.\n\n- These are multi million dollar operations with policies and rules.\n- Fill in the required info and they won't charge you for the Free pass!\n- If you don't believe us, just read their terms and conditions.\n\n---------------------------\n\n# 5. &gt; Adults Farm\nhttp://80.71.66.8/farm/?aid=760382\nGirls and Animals Getting Freaky....FREE Lifetime Membership!!\n\n# 4. &gt; Sexy Celebes\nhttp://80.71.66.8/celebst/?aid=760382\nThousands Of XXX Celebes doing it...FREE Lifetime Membership!!\n\n# 3. &gt; Play House Porn\nhttp://80.71.66.8/mega/?aid=760382\nLive Feeds From 60 Sites And Web Cams...FREE Lifetime Membership!!\n\n# 2. &gt; Asian Sex Fantasies\nhttp://80.71.66.8/asian/?aid=760382\nJapanese Schoolgirls, Live Sex Shows ...FREE Lifetime Membership!!\n\n# 1. &gt; Lesbian Lace\nhttp://80.71.66.8/lesbian/?aid=760382\nGirls and Girls Getting Freaky! ...FREE Lifetime Membership!!\n\n--------------------------\n\nJennifer Simpson, Miami, FL\nYour FREE lifetime membership has entertained my boyffriend and I for\nthe last two years!  Your Adult Sites are the best on the net!\n\nJoe Morgan Manhattan, NY\nYour live sex shows and live sex cams are unbelievable. The best part\nabout your porn sites, is that they're absolutely FREE!\n\n--------------------------\n\n\n\n\n\n\n\n\n\nRemoval Instructions:\n\nYou have received this advertisement because you have opted in to receive free adult internet\noffers and specials through our affiliated websites. If you do not wish to receive further emails\nor have received the email in error you may opt-out of our database here\nhttp://80.71.66.8/optout/ . Please allow 24 hours for removal.\n\nvonolmosatkirekpups\n
## 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            From social-admin@linux.ie  Thu Aug 22 16:37:34 2002\nX-Authentication-Warning: lugh.tuatha.org: Host [67.104.83.251] claimed to be email.qves.com\nFrom: &quot;Slim n Trim&quot; &lt;yenene@mx2.1premio.com&gt;\nTo: &lt;social@linux.ie&gt;\nDate: Thu, 22 Aug 2002 09:33:07 -0600\nContent-Transfer-Encoding: 7bit\nX-Mailer: Microsoft CDO for Windows 2000\nThread-Index: AcJJ8TbZoOKEj0AtTsKxJ7ZmOA0e/w==\nContent-Class: urn:content-classes:message\nX-Mimeole: Produced By Microsoft MimeOLE V6.00.2462.0000\nX-Originalarrivaltime: 22 Aug 2002 15:33:08.0313 (UTC) FILETIME=[3746D490:01C249F1]\nSubject: [ILUG-Social] re: Guaranteed to lose 10-12 lbs in 30 days 10.148\n\nI thought you might like these:\n1) Slim Down - Guaranteed to lose 10-12 lbs in 30 days\nhttp://www.freeyankee.com/cgi/fy2/to.cgi?l=822slim1\n\n2) Fight The Risk of Cancer! \nhttp://www.freeyankee.com/cgi/fy2/to.cgi?l=822nic1 \n\n3) Get the Child Support You Deserve - Free Legal Advice \nhttp://www.freeyankee.com/cgi/fy2/to.cgi?l=822ppl1\n\nOffer Manager\nDaily-Deals\n\n\n\n\n\n\n\n\nIf you wish to leave this list please use the link below.\nhttp://www.qves.com/trim/?social@linux.ie%7C29%7C134077\n\n\n-- \nIrish Linux Users' Group Social Events: social@linux.ie\nhttp://www.linux.ie/mailman/listinfo/social for (un)subscription information.\nList maintainer: listmaster@linux.ie\n
## 6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    From Thecashsystem@firemail.de  Thu Aug 22 16:58:24 2002\nMessage-ID: &lt;413-220028422154219900@freesource&gt;\nX-Priority: 1\nTo: &quot;1&quot; &lt;thecashsystem@firemail.de&gt;\nFrom: &quot;TheCashSystem&quot; &lt;Thecashsystem@firemail.de&gt;\nSubject: RE: Your Bank Account Information \nDate: Thu, 22 Aug 2002 10:42:19 -0500\nContent-type: text/plain; charset=US-ASCII\nX-MIME-Autoconverted: from quoted-printable to 8bit by webnote.net id QAA05573\nContent-Transfer-Encoding: 8bit\n\nA POWERHOUSE GIFTING PROGRAM You Don't Want To Miss! \n  GET IN WITH THE FOUNDERS! \nThe MAJOR PLAYERS are on This ONE\nFor ONCE be where the PlayerS are\nThis is YOUR Private Invitation\n\nEXPERTS ARE CALLING THIS THE FASTEST WAY \nTO HUGE CASH FLOW EVER CONCEIVED\nLeverage $1,000 into $50,000 Over and Over Again\n\nTHE QUESTION HERE IS:\nYOU EITHER WANT TO BE WEALTHY \nOR YOU DON'T!!!\nWHICH ONE ARE YOU?\nI am tossing you a financial lifeline and for your sake I \nHope you GRAB onto it and hold on tight For the Ride of youR life!\n\nTestimonials\n\nHear what average people are doing their first few days:\n�We've received 8,000 in 1 day and we are doing that over and over again!' Q.S. in AL\n �I'm a single mother in FL and I've received 12,000 in the last 4 days.� D. S. in FL\n�I was not sure about this when I sent off my $1,000 pledge, but I got back $2,000 the very next day!� L.L. in KY\n�I didn't have the money, so I found myself a partner to work this with. We have received $4,000 over the last 2 days. \nI think I made the right decision; don't you?� K. C. in FL\n�I pick up $3,000 my first day and I  they gave me free leads and all the training, you can too!� J.W. in CA\n\nANNOUNCING: We will CLOSE your sales for YOU! And Help you get a Fax Blast IMMEDIATELY Upon Your Entry!!!    YOU Make the MONEY!!!\nFREE LEADS!!! TRAINING!!!\n\n$$DON'T WAIT!!! CALL NOW $$\nFAX BACK TO: 1-800-421-6318 OR Call 1-800-896-6568 \n\nName__________________________________Phone___________________________________________\n\nFax_____________________________________Email____________________________________________\n\nBest Time To Call_________________________Time Zone________________________________________\n\nThis message is sent in compliance of the new e-mail bill. &quot;Per Section 301, Paragraph (a)(2)(C) of S. 1618, further transmissions by the sender of this email may be stopped, at no cost to you, by sending a reply to this email address with the word &quot;REMOVE&quot; in the subject line. Errors, omissions, and exceptions excluded.\n \nThis is NOT spam! I have compiled this list from our Replicate Database, relative to Seattle Marketing Group, The Gigt, or Turbo Team for the sole purpose of these communications. Your continued inclusion is ONLY by your gracious permission. If you wish to not receive this mail from me, please send an email to tesrewinter@yahoo.com with &quot;Remove&quot; in the subject and you will be deleted immediately.\n\n\n
##      y
## 1 spam
## 2 spam
## 3 spam
## 4 spam
## 5 spam
## 6 spam</code></pre>
<p>And the same thing with the ham dataset:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">ham_files &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="kw">list.files</span>(<span class="st">'./easy_ham'</span>), </a>
<a class="sourceLine" id="cb11-2" data-line-number="2">                    <span class="cf">function</span>(x) <span class="kw">paste</span>(<span class="st">'./easy_ham'</span>, x, <span class="dt">sep=</span><span class="st">'/'</span>))</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">ham_list &lt;-<span class="st"> </span><span class="kw">lapply</span>(ham_files, parse_email)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">ham_list_dfs &lt;-<span class="st"> </span><span class="kw">lapply</span>(ham_list, data.frame, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">ham &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ham_list_dfs) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="st">    </span><span class="kw">mutate</span>(<span class="st">'y'</span>=<span class="st">'ham'</span>)</a>
<a class="sourceLine" id="cb11-8" data-line-number="8"></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="kw">head</span>(ham)</a></code></pre></div>
<pre><code>##                                           id
## 1 &lt;1029945287.4797.TMDA@deepeddy.vircio.com&gt;
## 2                                       &lt;NA&gt;
## 3                                       &lt;NA&gt;
## 4                                       &lt;NA&gt;
## 5                                       &lt;NA&gt;
## 6                                       &lt;NA&gt;
##                                          from
## 1              Robert Elz &lt;kre@munnari.OZ.AU&gt;
## 2   Steve Burt &lt;steve.burt@cursor-system.com&gt;
## 3               &quot;Tim Chapman&quot; &lt;timc@2ubh.com&gt;
## 4            Monty Solomon &lt;monty@roscom.com&gt;
## 5   Stewart Smith &lt;Stewart.Smith@ee.ed.ac.uk&gt;
## 6 &quot;Martin Adamson&quot; &lt;martin@srv0.ems.ed.ac.uk&gt;
##                                                           to
## 1 Chris Garrigues &lt;cwg-dated-1030377287.06fa6d@DeepEddy.Com&gt;
## 2                                  zzzzteana@yahoogroups.com
## 3                                  zzzzteana@yahoogroups.com
## 4                                   undisclosed-recipient: ;
## 5                                  zzzzteana@yahoogroups.com
## 6                                  zzzzteana@yahoogroups.com
##                                    cc
## 1 exmh-workers@spamassassin.taint.org
## 2                                &lt;NA&gt;
## 3                                &lt;NA&gt;
## 4                                &lt;NA&gt;
## 5                                &lt;NA&gt;
## 6                                &lt;NA&gt;
##                                             subj
## 1                       Re: New Sequences Window
## 2                      [zzzzteana] RE: Alexander
## 3                      [zzzzteana] Moscow bomber
## 4          [IRR] Klez: The Virus That  Won't Die
## 5 Re: [zzzzteana] Nothing like mama used to make
## 6 Re: [zzzzteana] Nothing like mama used to make
##                              date
## 1 Thu, 22 Aug 2002 18:26:25 +0700
## 2 Thu, 22 Aug 2002 12:46:18 +0100
## 3 Thu, 22 Aug 2002 13:52:38 +0100
## 4 Thu, 22 Aug 2002 09:15:25 -0400
## 5 Thu, 22 Aug 2002 14:38:22 +0100
## 6 Thu, 22 Aug 2002 14:50:31 +0100
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    body
## 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           From exmh-workers-admin@redhat.com  Thu Aug 22 12:36:23 2002\nFrom: Robert Elz &lt;kre@munnari.OZ.AU&gt;\nTo: Chris Garrigues &lt;cwg-dated-1030377287.06fa6d@DeepEddy.Com&gt;\nCc: exmh-workers@spamassassin.taint.org\nSubject: Re: New Sequences Window\nDate: Thu, 22 Aug 2002 18:26:25 +0700\n Date:        Wed, 21 Aug 2002 10:54:46 -0500 From:        Chris Garrigues &lt;cwg-dated-1030377287.06fa6d@DeepEddy.Com&gt; Message-ID:  &lt;1029945287.4797.TMDA@deepeddy.vircio.com&gt;\n\n | I can't reproduce this error.\n\nFor me it is very repeatable... (like every time, without fail).\n\nThis is the debug log of the pick happening ...\n\n18:19:03 Pick_It {exec pick +inbox -list -lbrace -lbrace -subject ftp -rbrace -rbrace} {4852-4852 -sequence mercury}\n18:19:03 exec pick +inbox -list -lbrace -lbrace -subject ftp -rbrace -rbrace 4852-4852 -sequence mercury\n18:19:04 Ftoc_PickMsgs {{1 hit}}\n18:19:04 Marking 1 hits\n18:19:04 tkerror: syntax error in expression &quot;int ...\n\nNote, if I run the pick command by hand ...\n\ndelta$ pick +inbox -list -lbrace -lbrace -subject ftp -rbrace -rbrace  4852-4852 -sequence mercury\n1 hit\n\nThat's where the &quot;1 hit&quot; comes from (obviously).  The version of nmh I'm\nusing is ...\n\ndelta$ pick -version\npick -- nmh-1.0.4 [compiled on fuchsia.cs.mu.OZ.AU at Sun Mar 17 14:55:56 ICT 2002]\n\nAnd the relevant part of my .mh_profile ...\n\ndelta$ mhparam pick\n-seq sel -list\n\n\nSince the pick command works, the sequence (actually, both of them, the\none that's explicit on the command line, from the search popup, and the\none that comes from .mh_profile) do get created.\n\nkre\n\nps: this is still using the version of the code form a day ago, I haven't\nbeen able to reach the cvs repository today (local routing issue I think).\n\n\n\n_______________________________________________\nExmh-workers mailing list\nExmh-workers@redhat.com\nhttps://listman.redhat.com/mailman/listinfo/exmh-workers\n
## 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            From Steve_Burt@cursor-system.com  Thu Aug 22 12:46:39 2002\nX-Egroups-Return: sentto-2242572-52726-1030016790-zzzz=spamassassin.taint.org@returns.groups.yahoo.com\nX-X-Apparently-To: zzzzteana@yahoogroups.com\nTo: &quot;'zzzzteana@yahoogroups.com'&quot; &lt;zzzzteana@yahoogroups.com&gt;\nX-Mailer: Internet Mail Service (5.5.2653.19)\nX-Egroups-From: Steve Burt &lt;steve.burt@cursor-system.com&gt;\nFrom: Steve Burt &lt;Steve_Burt@cursor-system.com&gt;\nX-Yahoo-Profile: pyruse\nMailing-List: list zzzzteana@yahoogroups.com; contact forteana-owner@yahoogroups.com\nDate: Thu, 22 Aug 2002 12:46:18 +0100\nSubject: [zzzzteana] RE: Alexander\nReply-To: zzzzteana@yahoogroups.com\nContent-Transfer-Encoding: 7bit\n\nMartin A posted:\nTassos Papadopoulos, the Greek sculptor behind the plan, judged that the\n limestone of Mount Kerdylio, 70 miles east of Salonika and not far from the\n Mount Athos monastic community, was ideal for the patriotic sculpture. \n \n As well as Alexander's granite features, 240 ft high and 170 ft wide, a\n museum, a restored amphitheatre and car park for admiring crowds are\nplanned\n---------------------\nSo is this mountain limestone or granite?\nIf it's limestone, it'll weather pretty fast.\n\n------------------------ Yahoo! Groups Sponsor ---------------------~--&gt;\n4 DVDs Free +s&amp;p Join Now\nhttp://us.click.yahoo.com/pt6YBB/NXiEAA/mG3HAA/7gSolB/TM\n---------------------------------------------------------------------~-&gt;\n\nTo unsubscribe from this group, send an email to:\nforteana-unsubscribe@egroups.com\n\n \n\nYour use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ \n\n\n
## 3 From timc@2ubh.com  Thu Aug 22 13:52:59 2002\nX-Egroups-Return: sentto-2242572-52733-1030020820-zzzz=spamassassin.taint.org@returns.groups.yahoo.com\nX-X-Apparently-To: zzzzteana@yahoogroups.com\nX-Mailer: Microsoft Outlook Express Macintosh Edition - 4.5 (0410)\nTo: zzzzteana &lt;zzzzteana@yahoogroups.com&gt;\nX-Priority: 3\nFrom: &quot;Tim Chapman&quot; &lt;timc@2ubh.com&gt;\nX-Yahoo-Profile: tim2ubh\nMailing-List: list zzzzteana@yahoogroups.com; contact forteana-owner@yahoogroups.com\nDate: Thu, 22 Aug 2002 13:52:38 +0100\nSubject: [zzzzteana] Moscow bomber\nReply-To: zzzzteana@yahoogroups.com\nContent-Transfer-Encoding: 7bit\n\nMan Threatens Explosion In Moscow \n\nThursday August 22, 2002 1:40 PM\nMOSCOW (AP) - Security officers on Thursday seized an unidentified man who\nsaid he was armed with explosives and threatened to blow up his truck in\nfront of Russia's Federal Security Services headquarters in Moscow, NTV\ntelevision reported.\nThe officers seized an automatic rifle the man was carrying, then the man\ngot out of the truck and was taken into custody, NTV said. No other details\nwere immediately available.\nThe man had demanded talks with high government officials, the Interfax and\nITAR-Tass news agencies said. Ekho Moskvy radio reported that he wanted to\ntalk with Russian President Vladimir Putin.\nPolice and security forces rushed to the Security Service building, within\nblocks of the Kremlin, Red Square and the Bolshoi Ballet, and surrounded the\nman, who claimed to have one and a half tons of explosives, the news\nagencies said. Negotiations continued for about one and a half hours outside\nthe building, ITAR-Tass and Interfax reported, citing witnesses.\nThe man later drove away from the building, under police escort, and drove\nto a street near Moscow's Olympic Penta Hotel, where authorities held\nfurther negotiations with him, the Moscow police press service said. The\nmove appeared to be an attempt by security services to get him to a more\nsecure location. \n\n------------------------ Yahoo! Groups Sponsor ---------------------~--&gt;\n4 DVDs Free +s&amp;p Join Now\nhttp://us.click.yahoo.com/pt6YBB/NXiEAA/mG3HAA/7gSolB/TM\n---------------------------------------------------------------------~-&gt;\n\nTo unsubscribe from this group, send an email to:\nforteana-unsubscribe@egroups.com\n\n \n\nYour use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ \n\n\n
## 4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         From irregulars-admin@tb.tf  Thu Aug 22 14:23:39 2002\nX-To: undisclosed-recipient: ;\nFrom: Monty Solomon &lt;monty@roscom.com&gt;\nSubject: [IRR] Klez: The Virus That  Won't Die\nDate: Thu, 22 Aug 2002 09:15:25 -0400\n\nKlez: The Virus That Won't Die\n \nAlready the most prolific virus ever, Klez continues to wreak havoc.\n\nAndrew Brandt\n&gt;&gt;From the September 2002 issue of PC World magazine\nPosted Thursday, August 01, 2002\n\n\nThe Klez worm is approaching its seventh month of wriggling across \nthe Web, making it one of the most persistent viruses ever. And \nexperts warn that it may be a harbinger of new viruses that use a \ncombination of pernicious approaches to go from PC to PC.\n\nAntivirus software makers Symantec and McAfee both report more than \n2000 new infections daily, with no sign of letup at press time. The \nBritish security firm MessageLabs estimates that 1 in every 300 \ne-mail messages holds a variation of the Klez virus, and says that \nKlez has already surpassed last summer's SirCam as the most prolific \nvirus ever.\n\nAnd some newer Klez variants aren't merely nuisances--they can carry \nother viruses in them that corrupt your data.\n\n...\n\nhttp://www.pcworld.com/news/article/0,aid,103259,00.asp\n_______________________________________________\nIrregulars mailing list\nIrregulars@tb.tf\nhttp://tb.tf/mailman/listinfo/irregulars\n
## 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    From Stewart.Smith@ee.ed.ac.uk  Thu Aug 22 14:44:26 2002\nX-Egroups-Return: sentto-2242572-52736-1030023506-zzzz=spamassassin.taint.org@returns.groups.yahoo.com\nX-X-Apparently-To: zzzzteana@yahoogroups.com\nOrganization: Scottish Microelectronics Centre\nUser-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.1b) Gecko/20020628\nX-Accept-Language: en, en-us\nTo: zzzzteana@yahoogroups.com\nFrom: Stewart Smith &lt;Stewart.Smith@ee.ed.ac.uk&gt;\nX-Yahoo-Profile: stochasticus\nMailing-List: list zzzzteana@yahoogroups.com; contact forteana-owner@yahoogroups.com\nDate: Thu, 22 Aug 2002 14:38:22 +0100\nSubject: Re: [zzzzteana] Nothing like mama used to make\nReply-To: zzzzteana@yahoogroups.com\nContent-Transfer-Encoding: 7bit\n\n&gt;  in adding cream to spaghetti carbonara, which has the same effect on pasta as\n&gt;  making a pizza a deep-pie; \n\nI just had to jump in here as Carbonara is one of my favourites to make and ask \nwhat the hell are you supposed to use instead of cream?  I've never seen a \nrecipe that hasn't used this.  Personally I use low fat creme fraiche because it \nworks quite nicely but the only time I've seen an supposedly authentic recipe \nfor carbonara  it was identical to mine (cream, eggs and lots of fresh parmesan) \nexcept for the creme fraiche.\n\nStew\n-- \nStewart Smith\nScottish Microelectronics Centre, University of Edinburgh.\nhttp://www.ee.ed.ac.uk/~sxs/\n\n\n------------------------ Yahoo! Groups Sponsor ---------------------~--&gt;\n4 DVDs Free +s&amp;p Join Now\nhttp://us.click.yahoo.com/pt6YBB/NXiEAA/mG3HAA/7gSolB/TM\n---------------------------------------------------------------------~-&gt;\n\nTo unsubscribe from this group, send an email to:\nforteana-unsubscribe@egroups.com\n\n \n\nYour use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ \n\n\n
## 6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  From martin@srv0.ems.ed.ac.uk  Thu Aug 22 14:54:39 2002\nX-Egroups-Return: sentto-2242572-52737-1030024261-zzzz=spamassassin.taint.org@returns.groups.yahoo.com\nX-X-Apparently-To: zzzzteana@yahoogroups.com\nOrganization: Management School\nTo: zzzzteana@yahoogroups.com\nPriority: normal\nX-Mailer: Pegasus Mail for Windows (v4.01)\nContent-Description: Mail message body\nFrom: &quot;Martin Adamson&quot; &lt;martin@srv0.ems.ed.ac.uk&gt;\nMailing-List: list zzzzteana@yahoogroups.com; contact forteana-owner@yahoogroups.com\nDate: Thu, 22 Aug 2002 14:50:31 +0100\nSubject: Re: [zzzzteana] Nothing like mama used to make\nReply-To: zzzzteana@yahoogroups.com\nContent-Transfer-Encoding: 7bit\n\n\n&gt; I just had to jump in here as Carbonara is one of my favourites to make and \n&gt; ask \n&gt; what the hell are you supposed to use instead of cream? \n\nIsn't it just basically a mixture of beaten egg and bacon (or pancetta, \nreally)? You mix in the raw egg to the cooked pasta and the heat of the pasta \ncooks the egg. That's my understanding.\n\nMartin\n\n------------------------ Yahoo! Groups Sponsor ---------------------~--&gt;\n4 DVDs Free +s&amp;p Join Now\nhttp://us.click.yahoo.com/pt6YBB/NXiEAA/mG3HAA/7gSolB/TM\n---------------------------------------------------------------------~-&gt;\n\nTo unsubscribe from this group, send an email to:\nforteana-unsubscribe@egroups.com\n\n \n\nYour use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ \n\n\n
##     y
## 1 ham
## 2 ham
## 3 ham
## 4 ham
## 5 ham
## 6 ham</code></pre>
<p>Final dataframe:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">rbind</span>(spam, ham)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">df<span class="op">$</span>id &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="kw">nrow</span>(df))</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co"># Clean up environment:</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="kw">rm</span>(ham, ham_files, ham_list, ham_list_dfs, spam, spam_files, spam_list,</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">   spam_list_dfs)</a></code></pre></div>
</div>
<div id="feature-engineering" class="section level1">
<h1>Feature Engineering</h1>
<p>The simplest set of features would be a count of the words (or <em>tokens</em>) in each e-mail. I will go one step further and use their term frequency-inverse document frequency (TF-IDF) scores. Other features are easy to imagine, as a quick look at <a href="https://www.researchgate.net/publication/267379607_Identifying_Potentially_Useful_Email_Header_Features_for_Email_Spam_Filtering">the literature</a> on this topic suggests.</p>
<p>First, let’s remove some non-informative words from the e-mails, e.g., <em>a</em>, <em>of</em>, <em>another</em>. I’m using a custom list of stopwords I’ve used before, plus some troublesome HTML tags.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">stop_words &lt;-<span class="st"> </span><span class="kw">readLines</span>(<span class="st">'stopwords.txt'</span>)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">head</span>(stop_words)</a></code></pre></div>
<pre><code>## [1] &quot;a&quot;         &quot;a's&quot;       &quot;able&quot;      &quot;about&quot;     &quot;above&quot;     &quot;according&quot;</code></pre>
<p>Next I’m going to use the <code>tm</code> package for various transformations to help the classifier ignore superfluous details: lowercase all words, remove numbers, remove punctuation, remove stopwords, and eliminate excess white space:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">corpus &lt;-<span class="st"> </span><span class="kw">Corpus</span>(<span class="kw">VectorSource</span>(df<span class="op">$</span>body))</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"></a>
<a class="sourceLine" id="cb16-3" data-line-number="3">corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, <span class="kw">content_transformer</span>(tolower))</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, removeNumbers)</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, removePunctuation)</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, removeWords, <span class="kw">c</span>(<span class="st">'body'</span>, <span class="st">'date'</span>, <span class="st">'id'</span>, <span class="st">'cc'</span>, <span class="st">'subj'</span>,</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">                                        stop_words))</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, stripWhitespace)</a></code></pre></div>
<p>Now, generate the TF-IDF matrix. I’d like to keep the top 1000 terms, which experimentation suggests is where sparsity = 0.985.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">dtm &lt;-<span class="st"> </span><span class="kw">DocumentTermMatrix</span>(corpus, <span class="dt">control=</span><span class="kw">list</span>(<span class="dt">weighting=</span>weightTfIdf))</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">dtm &lt;-<span class="st"> </span><span class="kw">removeSparseTerms</span>(dtm, <span class="fl">0.985</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="kw">print</span>(dtm<span class="op">$</span>ncol)</a></code></pre></div>
<pre><code>## [1] 1017</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">features &lt;-<span class="st"> </span><span class="kw">cbind</span>(df, <span class="kw">data.frame</span>(<span class="kw">as.matrix</span>(dtm))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">-3</span>, <span class="dv">-4</span>, <span class="dv">-5</span>, <span class="dv">-6</span>, <span class="dv">-7</span>)</a></code></pre></div>
</div>
<div id="modeling" class="section level1">
<h1>Modeling</h1>
<p>Split into test and train sets:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1804</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">train_ix &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">seq</span>(<span class="dv">1</span>, <span class="kw">nrow</span>(features), <span class="dv">1</span>), <span class="fl">.75</span><span class="op">*</span><span class="kw">nrow</span>(features))</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"></a>
<a class="sourceLine" id="cb20-4" data-line-number="4">train &lt;-<span class="st"> </span>features[train_ix,]</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">test &lt;-<span class="st"> </span>features[<span class="op">-</span>train_ix,]</a></code></pre></div>
<p>Model using Naive Bayes:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">nb &lt;-<span class="st"> </span><span class="kw">naiveBayes</span>(<span class="kw">as.factor</span>(y) <span class="op">~</span><span class="st"> </span>., <span class="dt">data=</span>train)</a></code></pre></div>
</div>
<div id="evaluation" class="section level1">
<h1>Evaluation</h1>
<p>Take a look how model performs on test set:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">pred &lt;-<span class="st"> </span><span class="kw">predict</span>(nb, test)</a></code></pre></div>
<pre><code>## Warning in data.matrix(newdata): NAs introduced by coercion</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">table</span>(pred, test<span class="op">$</span>y)</a></code></pre></div>
<pre><code>##       
## pred   ham spam
##   ham  485    4
##   spam 139  122</code></pre>
<p>Calculate a few performance metrics:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">(accuracy &lt;-<span class="st"> </span>(<span class="dv">485</span> <span class="op">+</span><span class="st"> </span><span class="dv">122</span>)<span class="op">/</span><span class="dv">750</span>)</a></code></pre></div>
<pre><code>## [1] 0.8093333</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">(precision &lt;-<span class="st"> </span><span class="dv">122</span> <span class="op">/</span><span class="st"> </span>(<span class="dv">122</span> <span class="op">+</span><span class="st"> </span><span class="dv">4</span>))</a></code></pre></div>
<pre><code>## [1] 0.968254</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">(recall &lt;-<span class="st"> </span><span class="dv">122</span> <span class="op">/</span><span class="st"> </span>(<span class="dv">122</span> <span class="op">+</span><span class="st"> </span><span class="dv">139</span>))</a></code></pre></div>
<pre><code>## [1] 0.467433</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">(f1 &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>((precision<span class="op">*</span>recall) <span class="op">/</span><span class="st"> </span>(precision<span class="op">+</span>recall)))</a></code></pre></div>
<pre><code>## [1] 0.630491</code></pre>
<p>This model looks pretty good for a couple hours’ work!</p>
<p>In my opinion, optimizing for high precision is probably the route to go. For e-mail spam classification tasks, I would imagine that false positives are considered more costly than false negatives—that is, we would rather let a spam e-mail into the inbox than exclude a real e-mail as spam. Precision is a good metric for when the costs of a false positive are high, like in this case.</p>
</div>
    </section>
  </div>
</div>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
